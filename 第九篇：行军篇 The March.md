## ç¬¬ä¹ç¯‡ï¼šè¡Œå†›ç¯‡

**Chapter 9: The March**
**éƒ¨ç½²ç­–ç•¥ï¼šCI/CD ä¸Žå¤šçŽ¯å¢ƒåˆ‡æ¢ä¹‹é“**

---

### ðŸ® åŽŸæ–‡ + è‹±è¯‘ Original & Translation

> **å‡¡å†›ä¹‹é“ï¼Œç–¾å¦‚é£Žï¼Œå¾å¦‚æž—ï¼Œä¾µæŽ å¦‚ç«ï¼Œä¸åŠ¨å¦‚å±±ã€‚**
> In warfare, your movement should be swift like the wind, orderly like the forest, fierce like fire, and steady like the mountain.

> **çŸ¥å½¼ä¹‹æ¥è€…ï¼Œåˆ™è¶‹è€Œè¿Žä¹‹ï¼Œä»¥åˆ©åŠ¨ä¹Ÿã€‚**
> When you know the enemy is approaching, anticipate and intercept them â€” this is acting with advantage.

> **ä¸çŸ¥åœ°å½¢ï¼Œä¸å¯ä»¥è¡Œå†›ï¼›ä¸çŸ¥å±±æž—é™©é˜»ã€æ²®æ³½ä¹‹å½¢è€…ï¼Œä¸å¯ä»¥ç”¨å…µã€‚**
> Without understanding the terrain, one should not march; without knowing forests, rivers, and obstacles, one should not engage in battle.

---

### ðŸ’¡ ç¨‹åºå‘˜è§£è¯» Programmer's Interpretation

> è½¯ä»¶éƒ¨ç½²å°±æ˜¯â€œè¡Œå†›â€ï¼ŒçŽ¯å¢ƒå°±æ˜¯â€œåœ°å½¢â€ï¼Œ
> Software deployment is marching; environments are terrains.

> æƒ³è¦ç¨³å®šä¸Šçº¿ï¼Œå¿…é¡»å¦‚è¡Œå†›èˆ¬æŽŒæ¡å››ä»¶äº‹ï¼š
> To deploy safely, you must master four things:

1. **å¿«å¦‚é£Ž**ï¼šæž„å»º / éƒ¨ç½²æµç¨‹åº”é«˜æ•ˆè‡ªåŠ¨åŒ–
2. **ç¨³å¦‚å±±**ï¼šç”Ÿäº§çŽ¯å¢ƒä¸å¯é¢‘ç¹æ³¢åŠ¨
3. **éšå¦‚æž—**ï¼šç‰ˆæœ¬å·ã€æŽ¥å£å˜åŠ¨è¦æœ‰ç­–ç•¥
4. **çƒˆå¦‚ç«**ï¼šé‡å¼‚å¸¸è¦è¿…é€Ÿåº”å¯¹ã€è‡ªåŠ¨å›žæ»š

> è‹¥çŽ¯å¢ƒæœªçŸ¥ï¼ˆå¦‚æµ‹è¯•çŽ¯å¢ƒä¸åŒæ­¥ï¼‰ï¼Œéƒ¨ç½²å¿…ä¹±ã€‚
> If the terrain (environment) is unknown, deployment will fail.

> è¿ç»´ä½“ç³»çš„æœ¬è´¨ï¼Œæ˜¯â€œçŸ¥åœ°å½¢ã€æŽŒæ—¶æœºã€ç­–ç§»åŠ¨â€ã€‚
> The essence of operations is: understand terrain, control timing, plan movement.

---

### ðŸ§ª åº”ç”¨åœºæ™¯ Application Scenarios

> * å¤šçŽ¯å¢ƒéƒ¨ç½²ç®¡ç†ï¼ˆDev / Test / Staging / Prodï¼‰
> * Managing multi-stage environments: Dev â†’ Test â†’ Staging â†’ Prod

> * å¼•å…¥è‡ªåŠ¨åŒ–éƒ¨ç½²å·¥å…·ï¼ˆGitHub Actions, Azure DevOps, Jenkinsï¼‰
> * CI/CD automation with GitHub Actions, Azure DevOps, or Jenkins

> * çŽ¯å¢ƒéš”ç¦»ä¸Žé…ç½®æ³¨å…¥ï¼ˆå¦‚ `appsettings.{env}.json`ï¼‰
> * Environment isolation via configuration injection

> * ä¸Šçº¿å‰çš„é¢„æ£€æµ‹ã€Smoke Testã€å˜æ›´å®¡æ ¸æµç¨‹
> * Smoke testing and change approval before release

---

### âš”ï¸ æŠ€æœ¯æ ¼è¨€ Technical Aphorism

> æ¯æ¬¡éƒ¨ç½²ï¼Œéƒ½æ˜¯ä¸€æ¬¡æˆ˜å½¹ï¼›æ¯ä¸ªçŽ¯å¢ƒï¼Œéƒ½æ˜¯ä¸€ä¸ªæˆ˜åœºã€‚
> Every deployment is a battle; every environment is a battlefield.

> æ…¢ä¸Šçº¿ä¸æ˜¯ç¨³ä¸Šçº¿ï¼›è‡ªåŠ¨åŒ–æ‰æ˜¯ç¨³çš„å‰æã€‚
> Slow release â‰  safe release. Automation ensures safety.

> æœªçŸ¥çŽ¯å¢ƒä¸­ä¸Šçº¿ï¼Œç­‰äºŽå¤œè¡Œå†›ã€‚
> Releasing into an unknown environment is marching in the dark.

---

### ðŸ’» C# ä»£ç ç±»æ¯” Code Analogy

```csharp
public class Deployment
{
    public enum Env { Dev, Test, Staging, Prod }

    public void DeployTo(Env environment)
    {
        Console.WriteLine($"ðŸš€ Deploying to {environment}");

        switch (environment)
        {
            case Env.Prod:
                SmokeTest();
                break;
            case Env.Staging:
                NotifyStakeholders();
                break;
            default:
                break;
        }

        Console.WriteLine("âœ… Deployment completed.");
    }

    private void SmokeTest() =>
        Console.WriteLine("ðŸ”¥ Running smoke tests...");

    private void NotifyStakeholders() =>
        Console.WriteLine("ðŸ“¢ Notifying QA & Product...");
}
```

> æ­¤ä»£ç æ¨¡æ‹Ÿå¤šçŽ¯å¢ƒéƒ¨ç½²ç­–ç•¥ï¼šä¸åŒé˜¶æ®µéƒ¨ç½²åº”æœ‰ä¸åŒç­–ç•¥ä¸ŽéªŒè¯æœºåˆ¶ã€‚
> This code models deployment variations: each environment requires tailored precautions.

---

### ðŸ—ºï¸ æž¶æž„å›¾ç¤º Architectural Diagram (Mermaid)

```mermaid
flowchart TD
    A[å¼€å‘æäº¤ Git Push] --> B[CI æž„å»º Build]
    B --> C[éƒ¨ç½² Dev çŽ¯å¢ƒ]
    C --> D[è¿è¡Œå•å…ƒæµ‹è¯•]
    D --> E[éƒ¨ç½² Test çŽ¯å¢ƒ]
    E --> F[QA è‡ªåŠ¨éªŒè¯]
    F --> G[éƒ¨ç½² Staging çŽ¯å¢ƒ]
    G --> H{Smoke æµ‹è¯•é€šè¿‡ï¼Ÿ}
    H -->|Yes| I[éƒ¨ç½²ç”Ÿäº§çŽ¯å¢ƒ Prod]
    H -->|No| J[é˜»æ­¢å‘å¸ƒ Halt Release]
```

> æž¶æž„å›¾æ¸…æ™°å‘ˆçŽ°äº†â€œé€æ­¥æŽ¨è¿› + è‡ªåŠ¨åˆ¤æ–­ + é˜¶æ®µæ£€æµ‹â€çš„è¡Œå†›å¼éƒ¨ç½²ç­–ç•¥ã€‚
> This diagram shows staged deployment: step-by-step movement with automated checks â€” like a military march.

---

### ðŸ“Œ æ€»ç»“ Summary

> * å¤šçŽ¯å¢ƒéƒ¨ç½²æ˜¯çŽ°ä»£ç³»ç»Ÿçš„åŸºæœ¬ä½œæˆ˜ç­–ç•¥
> * Multi-environment deployment is modern software warfare

> * éƒ¨ç½²æµç¨‹åº”â€œå¿«ã€ç¨³ã€å¯å›žé€€â€ï¼Œä¸é æ‰‹å·¥ã€ä¸é è®°å¿†
> * Deployments must be fast, stable, and reversible â€” not manual or memory-based

> * æˆç†Ÿå›¢é˜Ÿçš„ DevOps æ˜¯â€œè¡Œå†›å¼ä½œæˆ˜â€è€Œéžâ€œæ¸¸å‡»æˆ˜â€
> * Mature DevOps behaves like coordinated military maneuvers â€” not guerrilla warfare
